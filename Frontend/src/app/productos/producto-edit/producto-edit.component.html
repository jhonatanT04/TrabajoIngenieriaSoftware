<div class="container">
  <div class="page-header">
    <h1>Editar Producto</h1>
  </div>

  <div *ngIf="loading" class="loading">Cargando...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <form *ngIf="producto && !loading" (ngSubmit)="guardar()">
    <div class="form-group">
      <label>SKU</label>
      <input type="text" class="form-control" [(ngModel)]="producto.sku" name="sku" required>
    </div>

    <div class="form-group">
      <label>Nombre</label>
      <input type="text" class="form-control" [(ngModel)]="producto.name" name="name" required>
    </div>

    <div class="form-group">
      <label>Descripción</label>
      <textarea class="form-control" [(ngModel)]="producto.description" name="description"></textarea>
    </div>

    <div class="form-group">
      <label>Categoría</label>
      <select class="form-control" [(ngModel)]="producto.category_id" name="category_id">
        <option value="">Seleccionar categoría</option>
        <option *ngFor="let cat of categorias" [value]="cat.id">{{ cat.name }}</option>
      </select>
    </div>

    <div class="form-group">
      <label>Marca</label>
      <select class="form-control" [(ngModel)]="producto.brand_id" name="brand_id">
        <option value="">Seleccionar marca</option>
        <option *ngFor="let marca of marcas" [value]="marca.id">{{ marca.name }}</option>
      </select>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Precio de Venta</label>
          <input type="number" class="form-control" [(ngModel)]="producto.sale_price" name="sale_price" required>
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Precio de Costo</label>
          <input type="number" class="form-control" [(ngModel)]="producto.cost_price" name="cost_price" required>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label>Stock Mínimo</label>
          <input type="number" class="form-control" [(ngModel)]="producto.stock_min" name="stock_min">
        </div>
      </div>
      <div class="col-md-6">
        <div class="form-group">
          <label>Stock Máximo</label>
          <input type="number" class="form-control" [(ngModel)]="producto.stock_max" name="stock_max">
        </div>
      </div>
    </div>

    <div class="form-check">
      <input type="checkbox" class="form-check-input" [(ngModel)]="producto.is_active" name="is_active" id="is_active">
      <label class="form-check-label" for="is_active">Activo</label>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="saving">
        {{ saving ? 'Guardando...' : 'Guardar' }}
      </button>
      <a routerLink="/productos" class="btn btn-secondary">Cancelar</a>
    </div>
  </form>
</div>
