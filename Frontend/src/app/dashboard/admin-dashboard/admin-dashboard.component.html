<div class="dashboard-container">
  
  <div class="page-header">
    <h1 class="page-title">
      <span class="material-icons">dashboard</span>
      Dashboard Administrador
    </h1>
    <div class="header-actions">
      <button class="btn btn-light">
        <span class="material-icons">refresh</span>
        Actualizar
      </button>
    </div>
  </div>

  
  <div class="metrics-grid">
    <div class="metric-card" *ngFor="let metric of metrics">
      <div class="metric-header">
        <div>
          <div class="metric-value">{{ metric.value }}</div>
          <div class="metric-label">{{ metric.label }}</div>
        </div>
        <div class="metric-icon" [ngClass]="metric.type">
          <span class="material-icons">{{ metric.icon }}</span>
        </div>
      </div>
      <div class="metric-change" [ngClass]="metric.changeType">
        <span class="material-icons">{{ metric.changeType === 'positive' ? 'trending_up' : 'trending_down' }}</span>
        {{ metric.change }}
      </div>
    </div>
  </div>

  
  <div class="quick-actions">
    <div class="action-card" *ngFor="let action of quickActions" (click)="action.action()">
      <span class="material-icons">{{ action.icon }}</span>
      <div class="action-title">{{ action.title }}</div>
    </div>
  </div>

  
  <div class="charts-section">
    
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">Ventas (últimos 7 días)</h3>
        <button class="btn btn-sm btn-light">
          <span class="material-icons">more_vert</span>
        </button>
      </div>
      <div class="chart-summary" *ngIf="ventasPorDia.length">Total últimos 7 días: $ {{ totalVentas7Dias | number:'1.0-2' }}</div>
      <div class="chart-bars" *ngIf="ventasPorDia.length; else ventasEmpty">
        <div class="bar-row" *ngFor="let d of ventasPorDia; let i = index">
          <div class="bar-label">{{ d.label }}</div>
          <div class="bar">
            <div class="bar-fill" [style.width.%]="(d.total / maxVentasDia) * 100"></div>
          </div>
          <div class="bar-value">$ {{ d.total | number:'1.0-2' }}</div>
        </div>
      </div>
      <ng-template #ventasEmpty>
        <div class="chart-placeholder">
          <span class="material-icons" style="font-size: 3rem; margin-bottom: 1rem;">bar_chart</span>
          <p>Sin datos de ventas</p>
        </div>
      </ng-template>
    </div>

    
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">Top Productos</h3>
      </div>
      <div class="chart-summary" *ngIf="topProductos.length">Total items vendidos: {{ totalItemsTop }}</div>
      <div class="chart-list" *ngIf="topProductos.length; else topEmpty">
        <div class="bar-row" *ngFor="let p of topProductos">
          <div class="bar-label" [title]="p.name">{{ p.name }}</div>
          <div class="bar">
            <div class="bar-fill" [style.width.%]="(p.cantidad / maxProductoCantidad) * 100"></div>
          </div>
          <div class="bar-value">{{ p.cantidad }}</div>
        </div>
      </div>
      <ng-template #topEmpty>
        <div class="chart-placeholder" style="height: 300px;">
          <span class="material-icons" style="font-size: 3rem; margin-bottom: 1rem;">pie_chart</span>
          <p>Sin datos de productos</p>
        </div>
      </ng-template>
    </div>
  </div>

  
  <div class="activity-section">
    <div class="chart-header">
      <h3 class="chart-title">
        <span class="material-icons" style="vertical-align: middle; margin-right: 0.5rem;">history</span>
        Actividad Reciente
      </h3>
    </div>
    <div class="activity-item" *ngFor="let activity of recentActivity">
      <div class="activity-header">
        <span class="activity-title">{{ activity.title }}</span>
        <span class="activity-time">{{ activity.time }}</span>
      </div>
      <div class="activity-description">{{ activity.description }}</div>
    </div>
  </div>
</div>
