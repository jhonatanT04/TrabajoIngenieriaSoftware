<div class="dashboard-container">
  
  <div class="page-header">
    <h1 class="page-title">
      <span class="material-icons">point_of_sale</span>
      Dashboard Cajero
    </h1>
    <div class="header-actions">
      <button class="btn btn-light">
        <span class="material-icons">refresh</span>
        Actualizar
      </button>
    </div>
  </div>

  
  <div class="metrics-grid">
    <div class="metric-card" *ngFor="let metric of metrics">
      <div class="metric-header">
        <div>
          <div class="metric-value">{{ metric.value }}</div>
          <div class="metric-label">{{ metric.label }}</div>
        </div>
        <div class="metric-icon" [ngClass]="metric.type">
          <span class="material-icons">{{ metric.icon }}</span>
        </div>
      </div>
      <div class="metric-change" [ngClass]="metric.changeType">
        <span class="material-icons">{{ metric.changeType === 'positive' ? 'trending_up' : 'trending_down' }}</span>
        {{ metric.change }}
      </div>
    </div>
  </div>

  
  <div class="quick-actions">
    <div class="action-card" *ngFor="let action of quickActions" (click)="action.action()">
      <span class="material-icons">{{ action.icon }}</span>
      <div class="action-title">{{ action.title }}</div>
    </div>
  </div>

  
  <div class="charts-section">
    
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">Evolución de ventas en el día</h3>
        <button class="btn btn-sm btn-light">
          <span class="material-icons">more_vert</span>
        </button>
      </div>
      <div class="chart-summary" *ngIf="ventasPorHora.length">Total hoy: $ {{ totalVentasHoy | number:'1.0-2' }}</div>
      <div class="chart-bars" *ngIf="ventasPorHora.length > 0 && ventasPorHora[0].total > 0; else ventasEmpty">
        <div class="bar-row" *ngFor="let d of ventasPorHora">
          <div class="bar-label">{{ d.label }}</div>
          <div class="bar">
            <div class="bar-fill" [style.width.%]="(d.total / maxVentasHora) * 100"></div>
          </div>
          <div class="bar-value">$ {{ d.total | number:'1.0-2' }}</div>
        </div>
      </div>
      <ng-template #ventasEmpty>
        <div class="chart-placeholder">
          <span class="material-icons" style="font-size: 3rem; margin-bottom: 1rem;">show_chart</span>
          <p>Sin ventas en el día</p>
        </div>
      </ng-template>
    </div>

    
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">Efectivo vs Tarjeta</h3>
      </div>
      <div class="chart-pie" *ngIf="(efectivoVsTarjeta[0].total + efectivoVsTarjeta[1].total) > 0; else pagoEmpty">
        <div class="pie-row" *ngFor="let p of efectivoVsTarjeta">
          <div class="pie-item">
            <div class="pie-label">{{ p.type }}</div>
            <div class="pie-bar">
              <div class="pie-fill" [style.width.%]="p.percentage" [ngClass]="p.type === 'Efectivo' ? 'efectivo' : 'tarjeta'"></div>
            </div>
            <div class="pie-value">
              <div>${{ p.total | number:'1.0-2' }}</div>
              <div style="font-size: 0.875rem; color: var(--text-secondary);">{{ p.percentage | number:'1.1-1' }}%</div>
            </div>
          </div>
        </div>
      </div>
      <ng-template #pagoEmpty>
        <div class="chart-placeholder" style="height: 300px;">
          <span class="material-icons" style="font-size: 3rem; margin-bottom: 1rem;">account_balance_wallet</span>
          <p>Sin pagos registrados</p>
        </div>
      </ng-template>
    </div>
  </div>

  
  <div class="activity-section">
    <div class="chart-header">
      <h3 class="chart-title">
        <span class="material-icons" style="vertical-align: middle; margin-right: 0.5rem;">history</span>
        Actividad Reciente
      </h3>
    </div>
    <div class="activity-item" *ngFor="let activity of recentActivity">
      <div class="activity-header">
        <span class="activity-title">{{ activity.title }}</span>
        <span class="activity-time">{{ activity.time }}</span>
      </div>
      <div class="activity-description">{{ activity.description }}</div>
    </div>
  </div>
</div>
