<div *ngIf="loading" class="spinner">Cargando...</div>
<div *ngIf="error" class="alert alert-danger">{{ error }}</div>

<div *ngIf="usuario && !loading" class="usuario-form">
  <h2>Editar Usuario</h2>

  <div class="form-group">
    <label>Nombre</label>
    <input [(ngModel)]="usuario.first_name" class="form-control">
  </div>

  <div class="form-group">
    <label>Apellido</label>
    <input [(ngModel)]="usuario.last_name" class="form-control">
  </div>

  <div class="form-group">
    <label>Email</label>
    <input [(ngModel)]="usuario.email" class="form-control" type="email">
  </div>

  <div class="form-group">
    <label>Teléfono</label>
    <input [(ngModel)]="usuario.phone" class="form-control">
  </div>

  <div class="form-group">
    <label>Perfil</label>
    <select [(ngModel)]="selectedProfileId" class="form-control">
      <option *ngFor="let profile of profiles" [value]="profile.id">{{ profile.name }}</option>
    </select>
  </div>

  <div class="form-group">
    <label>Nueva contraseña (opcional)</label>
    <input [(ngModel)]="newPassword" class="form-control" type="password" placeholder="Dejar en blanco para mantener" />
  </div>

  <div class="form-group">
    <label>Estado</label>
    <select [(ngModel)]="usuario.is_active" class="form-control">
      <option [value]="true">Activo</option>
      <option [value]="false">Inactivo</option>
    </select>
  </div>

  <button (click)="guardar()" class="btn btn-primary" [disabled]="saving">{{ saving ? 'Guardando...' : 'Actualizar' }}</button>
  <a [routerLink]="['/admin/usuarios']" class="btn btn-secondary">Cancelar</a>
</div>
